
<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width">
<title>Friends</title><link rel="stylesheet" href="css/style.css">
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script src="js/firebase_init.js"></script><script src="js/auth.js"></script></head><body class="theme-dark"><div class="app"><aside class="sidebar"><div class="logo"><img src="assets/server_logo.svg" style="width:48px;height:48px"></div><a class="icon" href="chat.html">ğŸ </a><a class="icon" href="dm.html">ğŸ’¬</a><a class="icon" href="friends.html">ğŸ‘¥</a><a class="icon" href="games.html">ğŸ®</a><a class="icon" href="notifications.html">ğŸ””</a></aside><div class="main"><div class="header"><div class="server-title">ChatPack</div></div><div class="content"><div class="channels" style="display:none"></div><div class="chat-area">
<header><a href="chat.html">Back</a> Friends</header>
<main style="padding:20px"><div class="card" style="max-width:700px;margin:0 auto">
  <h3>Your Friends</h3>
  <div id="friendsList"></div>
</div></main>
<script>
firebase.auth().onAuthStateChanged(function(user){
  if(!user) return window.location.href='index.html';
  var uid = user.uid;
  firebase.database().ref('friends/'+uid).on('value', function(snap){
    var out='';
    snap.forEach(function(ch){
      out += '<div>'+ch.key+' <button onclick="startFriendDM(\''+ch.key+'\')">DM</button></div>';
    });
    document.getElementById('friendsList').innerHTML = out || '<p>No friends yet</p>';
  });
});
function startFriendDM(uid){
  // look up email
  firebase.database().ref('users/'+uid+'/email').once('value').then(function(s){ var email = s.val(); if(email) { window.location.href='dm.html?to='+encodeURIComponent(email); } });
}
</script>
</body></html>
</div></div></div></div></body></html>